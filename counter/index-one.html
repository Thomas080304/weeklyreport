<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>vuex</title>
    <!-- <script src="https://cdn.jsdelivr.net/npm/vue@2.5.17/dist/vue.js"></script> -->
    <script src="https://cdn.bootcss.com/vue/2.5.17-beta.0/vue.js"></script>
    <script src="https://cdn.bootcss.com/vuex/3.0.1/vuex.js"></script>
</head>

<body>
    <div id="app"></div>
    <script type="text/javascript">
    /*?---vuex是什么
    const store = new Vuex.Store({
        state: {
            count: 0
        },
        mutations: {
            increment(state) {
                state.count++
            }
        }
    })
    store.commit('increment');
    store.commit('increment');
    store.commit('increment');
    store.commit('increment');
    store.commit('increment');
    store.commit('increment');
    console.log(store);*/
    /*vuex 是一个对象 api如下：
      commit dispatch state getters
    */
    const moduleA = {
        namespaced:true,
        state: { 
            a:'moduleA' 
        },
        mutations: {
            changeA(state){
                this.a = 'moduleA++';
            }
        },
        actions: { 
            actionA(){
                return new Promise((resole,reject)=>{
                    window.setTimeout(()=>{
                        resole('success');
                    },2000);
                });
            }
        },
        getters: { 
            a(state){
                return state.a;
            }
        }
    }
    /*vuex是可以组合的对象
        在没有命名空间的情况下,所有的model的state都会注册到
        全局的state上,所有的getter会注册到全局的getter上,
        所有的mutations会注册到_mutations,所有的actions会注册到
        _actions
        如果添加了命名空间,在上述的getter,_mutations,_actions都
        会添加命名空间如:namespcae/a
    */
    const moduleB = {
        namespaced:true,
        state: {
            b:'moduleB'
        },
        mutations: { 
            changeB(state){
                this.b = 'moduleB++';
            }
        },
        actions: { 
            actionB(){
                return new Promise((resole,reject)=>{
                    window.setTimeout(()=>{
                        resole('success');
                    },2000);
                });
            }
        },
		modules:{moduleA},
        getters: { 
            b(state){
                return state.b;
            }
        }
    }
	debugger
    const store2 = new Vuex.Store({
        state: {
            count: 0
        },
        modules:{moduleB},
        mutations: {
            increment(state) {
                state.count++
            }
        },
        actions: { 
            actionC(){
                return new Promise((resole,reject)=>{
                    window.setTimeout(()=>{
                        resole('success');
                    },2000);
                });
            }
        },
    })
    console.log(store2);
    </script>
</body>
<!-- store 
    
-->

</html>